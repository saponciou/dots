!function(t){var e={};function n(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return t[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(a,r,function(e){return t[e]}.bind(null,r));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var a=0;function r(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var o="__private_"+a+++"_"+"send",i=class{constructor({name:t}){Object.defineProperty(this,o,{writable:!0,value:async(t,e,n)=>{const{tabId:a,senderMetadata:r}=e||{},o={async:n,tabId:a,data:t,channel:this.name,senderMetadata:r};return"number"==typeof a?chrome.tabs.sendMessage(a,o):chrome.runtime.sendMessage(o)}}),this.sendMessage=(async(t,e)=>{await r(this,o)[o](t,e,!1)}),this.call=(async(t,e)=>{const n=await r(this,o)[o](t,e,!0);if(!n||!n.success)throw new Error(`Failed to call with: ${JSON.stringify(t)}`);return n.data}),this.onMessage=(t=>{chrome.runtime.onMessage.addListener((e,n,a)=>{if(e.async||e.channel!==this.name)return!1;try{n.metadata=e.senderMetadata,t(e.data,n)}catch(t){console.error(t)}return a({success:!0}),!0})}),this.onCall=(t=>{chrome.runtime.onMessage.addListener((e,n,a)=>{const r=t=>{a({success:!0,data:t})};return!(!e.async||this.name!==e.channel||((async()=>{try{n.metadata=e.senderMetadata,await t(e.data,n,r)}catch(t){a({success:!1})}})(),0))})}),this.name=t}};var s={content:new i({name:"content"}),provider:new i({name:"provider"})};const c="provider-config",d={prioritizeExodus:!0,autoConnect:!1},u=new Set(Object.keys(d));var h={get:async function(t){if(!u.has(t))throw new Error("Unknown key!");const e=`!${c}!${t}`,n=await chrome.storage.local.get(e),a=Object.hasOwn(d,t)?d[t]:void 0;return Object.hasOwn(n,e)?n[e]:a}},l=0;var m=function(t){return"__private_"+l+++"_"+t}("isValidEvent"),p=class{constructor({name:t,target:e}){Object.defineProperty(this,m,{writable:!0,value:t=>{const e=t.data;return t.origin===window.location.origin&&"object"==typeof e&&e.target===this.name&&e.data}}),this.write=(t=>{const e=window.location.origin;window.postMessage({target:this.target,data:t},e)}),this.on=((t,e)=>{window.addEventListener("message",t=>{if(function(t,e){if(!Object.prototype.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}(this,m)[m](t)){const n=t.data;e(n.data)}})}),this.name=t,this.target=e}removeListener(t,e){}};const w=["https://jup.ag","https://www.mercurial.finance","https://magiceden.io","https://marinade.finance","https://trade.mango.markets","https://app.step.finance","https://app.meanfi.com","https://solend.fi","https://projectlarix.com","https://app.saber.so","https://mainnet.port.finance","https://app.crema.finance","https://parrot.fi","https://raydium.io","https://www.orca.so","https://solsea.io","https://owl.games","https://solanart.io","https://frakt.xyz","https://exchange.art","https://www.portalbridge.com","https://play.laddercaster.com"],g=t=>btoa([...t].map(t=>String.fromCharCode(t)).join("")),f=t=>{try{const e=t.sizes.value.match(/\d+/gm);return parseInt(e[0],10)}catch(t){return 0}},y=t=>{const e=new Image;return e.crossOrigin="anonymous",e.src=t,new Promise(t=>{e.onload=(()=>{const n=document.createElement("canvas"),a=n.getContext("2d"),r=((t,e)=>{const n=t.width/t.height;let a,r,o,i,s,c;return n>1?(o=a=Math.min(t.width,e),r=a,i=Math.round(a/n),s=0,c=Math.floor((o-i)/2)):(i=r=Math.min(t.height,e),a=r,o=Math.round(r*n),c=0,s=Math.floor((i-o)/2)),{width:a,height:r,dWidth:o,dHeight:i,dx:s,dy:c}})(e,120),o=r.width,i=r.height;n.width=o,n.height=i,a.drawImage(e,r.dx,r.dy,r.dWidth,r.dHeight);const{data:s}=a.getImageData(0,0,o,i);t({width:o,height:i,data:g(s)})}),e.onerror=(()=>t(null))})};(async()=>{const t=await h.get("prioritizeExodus"),e=chrome.runtime.getURL("inapp.js"),n={"data-extension-id":chrome.runtime.id,"data-prioritize-exodus":t||!1};await(({id:t,src:e,attributes:n={}})=>new Promise(a=>{const r=document.head||document.documentElement,o=document.createElement("script");o.id=t,o.src=e,Object.keys(n).map(t=>{o.setAttribute(t,n[t])}),o.addEventListener("load",()=>{a(),r.contains(o)&&r.removeChild(o)}),r.insertBefore(o,r.children[0])}))({id:"exodus-extension",src:e,attributes:n})})();const v=new Promise(t=>{window.addEventListener("load",async()=>{const e=(()=>{const t=document.querySelector('head > meta[property="og:site_name"]');if(t)return t.content;const e=document.querySelector('head > meta[name="title"]');return e?e.content:document.title})(),n=await(async()=>{var t;const e=document.querySelectorAll('head > link[rel~="icon"]'),n=(null==(t=Array.from(e).sort((t,e)=>f(e)-f(t))[0])?void 0:t.href)||`${document.location.origin}/favicon.ico`;return y(n)})();t({title:e,icon:n})})}),b=({name:t,target:e})=>{const n=s[t],a=new p({name:t,target:e});a.on("data",async t=>{const e=!JSON.parse(t).method,r={senderMetadata:await v};e?n.sendMessage(t,r):n.call(t,r).then(a.write)}),n.onMessage((t,e)=>{e.tab||a.write(t)})};b({name:"provider",target:"provider-window"}),b({name:"content",target:"content-window"});(async()=>{const t=await h.get("autoConnect"),e=!!localStorage.getItem("walletName"),n=w.includes(window.location.origin);t&&!e&&n&&(localStorage.setItem("walletName",'"Exodus"'),window.location.reload())})()}]);